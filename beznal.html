<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Счет</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>

body{
    font-family: Arial, sans-serif;
    background:#f0f2f5;
    padding:20px;
}

.container{
    width:900px;
    margin:auto;
}

#print-area{
    background:white;
    padding:30px;
}

/* Заголовок */
h1{
    text-align:center;
    margin-bottom:20px;
}

/* Таблица */
table{
    width:100%;
    border-collapse:collapse;
    margin-bottom:20px;
}

th,td{
    border:1px solid #ccc;
    padding:8px;
    font-size:14px;
}

th{
    background:#1976d2;
    color:white;
}

/* ширина колонок */
#items th:nth-child(1),
#items td:nth-child(1){
    width:60px;
    text-align:center;
}

#items th:nth-child(2),
#items td:nth-child(2){
    width:auto;
}

#items th:nth-child(3),
#items td:nth-child(3){
    width:60px;
    text-align:center;
}

#items th:nth-child(4),
#items td:nth-child(4){
    width:80px;
    text-align:right;
}

input{
    width:100%;
    border:none;
    outline:none;
    font-size:14px;
}

.total{
    text-align:right;
    font-weight:bold;
}

/* кнопки */
.btn{
    width:100%;
    padding:12px;
    margin-top:10px;
    border:none;
    background:#2e7d32;
    color:white;
    font-size:16px;
    cursor:pointer;
}

.btn:hover{
    opacity:.9;
}

</style>
</head>
<body>

<div class="container">

<div id="print-area">

<h1>СЧЕТ № <span id="invoice-number"></span></h1>

<p><b>Дата:</b> <span id="date"></span></p>

<p>
<b>Плательщик:</b>
<input type="text" id="payer" placeholder="Введите плательщика">
</p>

<h3>Получатель</h3>

<table>
<tr><td>ИП</td><td>Дворян Вадим Витальевич</td></tr>
<tr><td>УСН</td><td>1440001838</td></tr>
<tr><td>Расч. счет</td><td>2214050000024165</td></tr>
<tr><td>Банк</td><td>ЗАО "Агропромбанк"</td></tr>
</table>

<h3>Товары</h3>

<table id="items">
<thead>
<tr>
<th>Код</th>
<th>Наименование</th>
<th>Кол-во</th>
<th>Цена</th>
</tr>
</thead>

<tbody id="tbody"></tbody>

<tfoot>
<tr>
<td colspan="3" class="total">Итого:</td>
<td id="total">0</td>
</tr>
</tfoot>

</table>

</div>

<button class="btn" onclick="calc()">Рассчитать</button>
<button class="btn" onclick="generatePDF()">Скачать PDF</button>

</div>

<script>

/* дата */
document.getElementById("date").textContent =
new Date().toLocaleDateString("ru-RU");

/* создаем 10 строк */
for(let i=0;i<10;i++){
document.getElementById("tbody").innerHTML += `
<tr>
<td><input></td>
<td><input></td>
<td><input type="number" class="qty" value="0"></td>
<td><input type="number" class="price" value="0"></td>
</tr>
`;
}

/* расчет */
function calc(){
let total=0;

document.querySelectorAll("#items tbody tr").forEach(row=>{
let q=row.querySelector(".qty").value || 0;
let p=row.querySelector(".price").value || 0;
total+=q*p;
});

document.getElementById("total").innerText=
total.toLocaleString('ru-RU');
}

/* генерация pdf */
function generatePDF(){

calc();

/* случайный номер счета 0-20 */
const invoiceNumber = Math.floor(Math.random()*21);
document.getElementById("invoice-number").textContent = invoiceNumber;

const element = document.getElementById("print-area");

const opt = {
margin:10,
filename:'Счет_'+invoiceNumber+'.pdf',
image:{ type:'jpeg', quality:1 },
html2canvas:{ scale:2 },
jsPDF:{
unit:'mm',
format:'a4',
orientation:'portrait'
}
};

html2pdf().set(opt).from(element).save();
}

</script>

</body>
</html>
