<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Auto-Style</title>
<style>
body{font-family: Arial, sans-serif;margin:0;padding:20px;background:#f5f6f8;overflow-x:hidden;}
/* ---------- LOGIN ---------- */
.login-screen{
    position:fixed;top:0;left:0;width:100%;height:100vh;
    background:linear-gradient(135deg,#1b5e20,#000);
    display:flex;justify-content:center;align-items:center;z-index:9999;
}
.login-box{
    background:#fff;padding:30px 25px;border-radius:14px;width:100%;max-width:400px;text-align:center;
    box-shadow:0 20px 50px rgba(0,0,0,.4);animation:fadeIn .4s ease;
}
.login-logo{font-size:30px;font-weight:bold;margin-bottom:10px;}
.login-logo .green{color:#2e7d32;}
.login-logo .black{color:#000;}
.login-subtitle{color:#555;margin-bottom:15px;}
select,input[type="password"]{width:100%;padding:12px;font-size:16px;margin-bottom:15px;border:1px solid #ccc;border-radius:6px;}
.login-btn{width:100%;padding:12px;font-size:16px;border:none;border-radius:6px;cursor:pointer;color:white;background:linear-gradient(to right,#43a047,#1b5e20);}
.error-msg{color:#d32f2f;font-size:14px;margin-top:8px;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}

/* ---------- HEADER ---------- */
.header{background:white;padding:15px;border-radius:6px;box-shadow:0 2px 6px rgba(0,0,0,.1);margin-bottom:20px;text-align:center;}
.logo{font-size:28px;font-weight:bold;}
.logo .green{color:#2e7d32;}
.logo .black{color:#000;}

/* ---------- MENU ---------- */
.menu-toggle{position:fixed;top:20px;left:20px;width:45px;height:45px;background:linear-gradient(135deg,#2e7d32,#1b5e20);color:white;display:flex;align-items:center;justify-content:center;border-radius:12px;cursor:pointer;z-index:3000;box-shadow:0 6px 20px rgba(0,0,0,.3);transition:.3s;}
.menu-toggle:hover{transform:scale(1.1);}
.side-menu{position:fixed;top:0;left:-320px;width:300px;height:100%;background:rgba(20,20,20,.95);backdrop-filter:blur(12px);color:white;padding:80px 20px 20px 20px;transition:.4s cubic-bezier(.77,0,.18,1);z-index:2500;box-shadow:10px 0 40px rgba(0,0,0,.5);}
.side-menu.active{left:0;}
.user-name{font-size:20px;font-weight:bold;margin-bottom:15px;color:#43a047;}
.menu-btn{width:100%;padding:12px;margin-bottom:12px;border:none;border-radius:8px;cursor:pointer;color:white;font-size:14px;transition:.3s;background:linear-gradient(to right,#333,#222);}
.menu-btn:hover{transform:translateX(6px);background:linear-gradient(to right,#43a047,#1b5e20);}
.logout-btn{background:linear-gradient(to right,#c62828,#8e0000);}

/* ---------- CALCULATORS ---------- */
.wrapper{display:flex;gap:20px;flex-wrap:wrap;width:100%;}
.calculator{background:#fff;border-radius:6px;padding:20px;box-shadow:0 2px 6px rgba(0,0,0,0.1);flex:1 1 300px;width:100%;}
.title{font-size:20px;font-weight:bold;}
.subtitle{color:#d32f2f;font-weight:bold;margin-bottom:15px;}
.hint{margin-bottom:10px;color:#555;}
.input{width:100%;padding:10px;font-size:16px;margin-bottom:15px;border:1px solid #ccc;border-radius:4px;}
.btn{width:100%;color:white;padding:12px;font-size:16px;border:none;border-radius:4px;cursor:pointer;margin-bottom:20px;transition:.2s;}
.btn:hover{opacity:.9;}
.btn:active{transform:scale(.98);}
.btn-calc{background:linear-gradient(to right,#1976d2,#0d47a1);}
table{width:100%;border-collapse:collapse;font-size:14px;}
th{text-align:left;padding-bottom:8px;border-bottom:1px solid #ddd;}
td{padding:10px 0;border-bottom:1px solid #eee;}
.coef{color:#555;}
.result{font-weight:bold;}

/* ---------- CHAT ---------- */
#chatToggle{position:fixed;bottom:20px;right:20px;background:#2e7d32;color:white;padding:12px 15px;border-radius:30px;cursor:pointer;z-index:3000;}
#chatWindow{position:fixed;bottom:80px;right:20px;width:300px;height:400px;background:#1c1c1c;border-radius:12px;display:none;flex-direction:column;overflow:hidden;z-index:3000;}
#chatHeader{background:#2e7d32;color:white;padding:10px;font-weight:bold;}
#chatMessages{flex:1;padding:10px;color:white; overflow-y:auto;font-size:14px;}
#chatInputArea{display:flex;padding:10px;background:#111;}
#chatInput{flex:1;padding:8px;border:none;border-radius:6px;}
#chatSend{margin-left:5px;padding:8px 10px;background:#2e7d32;color:white;border:none;border-radius:6px;}
</style>
</head>
<body>

<!-- LOGIN SCREEN -->
<div id="loginScreen" class="login-screen">
  <div class="login-box">
    <div class="login-logo"><span class="green">A</span><span class="black">uto-</span><span class="green">S</span><span class="black">tyle</span></div>
    <div class="login-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
    <select id="userSelect">
      <option value="cashier">–ö–∞—Å—Å–∏—Ä</option>
      <option value="evgeniy">–ï–≤–≥–µ–Ω–∏–π</option>
      <option value="vadim">–í–∞–¥–∏–º</option>
    </select>
    <input type="password" id="passwordInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
    <button id="loginBtn" class="login-btn">–í–û–ô–¢–ò</button>
    <div id="errorMsg" class="error-msg"></div>
  </div>
</div>

<!-- MENU -->
<div class="menu-toggle" onclick="toggleMenu()">‚ò∞</div>
<div id="sideMenu" class="side-menu">
  <div class="user-name" id="currentUser"></div>
  <button class="menu-btn" onclick="location.href='beznal.html'">–û–§–û–†–ú–ò–¢–¨ –ë–ï–ó–ù–ê–õ</button>
  <button class="menu-btn" onclick="location.href='smena.html'">–ó–ê–ö–†–´–¢–ò–ï –°–ú–ï–ù–´</button>
  <button class="menu-btn" onclick="location.href='discount.html'">–°–ö–ò–î–û–ß–ù–ê–Ø –ö–ê–†–¢–ê</button>
  <button class="menu-btn" onclick="location.href='pass.html'">–ü–ê–†–û–õ–ò</button>
  <button class="menu-btn logout-btn" onclick="logout()">–í–´–ô–¢–ò</button>
</div>

<!-- HEADER -->
<div class="header">
  <div class="logo"><span class="green">A</span><span class="black">uto-</span><span class="green">S</span><span class="black">tyle</span></div>
</div>

<!-- CALCULATORS -->
<div class="wrapper">
  <!-- –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ê–ì–†–û–ü–†–û–ú–ë–ê–ù–ö -->
  <div class="calculator">
    <div class="title">–ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† –†–ê–°–°–†–û–ß–ö–ò</div>
    <div class="subtitle">–ê–ì–†–û–ü–†–û–ú–ë–ê–ù–ö</div>
    <div class="hint">–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —á–µ–∫–∞</div>
    <input type="number" class="input sum">
    <button class="btn btn-calc">–†–ê–°–°–ß–ò–¢–ê–¢–¨</button>
    <table>
      <tr><th>–†–ê–°–°–†–û–ß–ö–ê</th><th>–ö–û–≠–§–§.</th><th>–ò–¢–û–ì–û</th></tr>
      <tr><td>3 –º–µ—Å.</td><td class="coef">0.955</td><td class="result"></td></tr>
      <tr><td>6 –º–µ—Å.</td><td class="coef">0.93</td><td class="result"></td></tr>
      <tr><td>9 –º–µ—Å.</td><td class="coef">0.90</td><td class="result"></td></tr>
      <tr><td>12 –º–µ—Å.</td><td class="coef">0.875</td><td class="result"></td></tr>
    </table>
  </div>
  <!-- –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≠–ö–°–ò–ú–ë–ê–ù–ö -->
  <div class="calculator">
    <div class="title">–ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† –†–ê–°–°–†–û–ß–ö–ò</div>
    <div class="subtitle">–≠–ö–°–ò–ú–ë–ê–ù–ö</div>
    <div class="hint">–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —á–µ–∫–∞</div>
    <input type="number" class="input sum">
    <button class="btn btn-calc">–†–ê–°–°–ß–ò–¢–ê–¢–¨</button>
    <table>
      <tr><th>–†–ê–°–°–†–û–ß–ö–ê</th><th>–ö–û–≠–§–§.</th><th>–ò–¢–û–ì–û</th></tr>
      <tr><td>3 –º–µ—Å.</td><td class="coef">0.955</td><td class="result"></td></tr>
      <tr><td>6 –º–µ—Å.</td><td class="coef">0.93</td><td class="result"></td></tr>
      <tr><td>9 –º–µ—Å.</td><td class="coef">0.90</td><td class="result"></td></tr>
      <tr><td>12 –º–µ—Å.</td><td class="coef">0.886</td><td class="result"></td></tr>
    </table>
  </div>
  <!-- –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –°–ë–ï–†–ë–ê–ù–ö -->
  <div class="calculator">
    <div class="title">–ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† –†–ê–°–°–†–û–ß–ö–ò</div>
    <div class="subtitle">–°–ë–ï–†–ë–ê–ù–ö</div>
    <div class="hint">–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —á–µ–∫–∞</div>
    <input type="number" class="input sum">
    <button class="btn btn-calc">–†–ê–°–°–ß–ò–¢–ê–¢–¨</button>
    <table>
      <tr><th>–†–ê–°–°–†–û–ß–ö–ê</th><th>–ö–û–≠–§–§.</th><th>–ò–¢–û–ì–û</th></tr>
      <tr><td>3 –º–µ—Å.</td><td class="coef">0.96</td><td class="result"></td></tr>
      <tr><td>6 –º–µ—Å.</td><td class="coef">0.93</td><td class="result"></td></tr>
      <tr><td>9 –º–µ—Å.</td><td class="coef">0.90</td><td class="result"></td></tr>
      <tr><td>12 –º–µ—Å.</td><td class="coef">0.88</td><td class="result"></td></tr>
    </table>
  </div>
</div>

<!-- CHAT -->
<div id="chatToggle" onclick="toggleChat()">–ß–∞—Ç</div>
<div id="chatWindow">
  <div id="chatHeader">–ß–∞—Ç</div>
  <div id="chatMessages"></div>
  <div id="chatInputArea">
    <input type="text" id="chatInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ">
    <button id="chatSend">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </div>
</div>

<script>
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
const users = {
  cashier:{name:"–ö–∞—Å—Å–∏—Ä", pass:"2012"},
  evgeniy:{name:"–ï–≤–≥–µ–Ω–∏–π", pass:"0186"},
  vadim:{name:"–í–∞–¥–∏–º", pass:"2385"}
};
let currentUser="";
const chatKey="chatHistory";

// –í—Ö–æ–¥
document.getElementById("loginBtn").onclick = function(){
  const user=document.getElementById("userSelect").value;
  const pass=document.getElementById("passwordInput").value;
  if(pass===users[user].pass){
    const expire = Date.now()+24*60*60*1000; // 24 —á–∞—Å–∞
    localStorage.setItem("session",JSON.stringify({user:user,expire}));
    startSession(user);
  } else {
    document.getElementById("errorMsg").textContent="–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å";
  }
};

window.onload = function(){
  const saved = localStorage.getItem("session");
  if(saved){
    const data = JSON.parse(saved);
    if(Date.now()<data.expire) startSession(data.user);
    else localStorage.removeItem("session");
  }
};

// –ù–∞—á–∞–ª–æ —Å–µ—Å—Å–∏–∏
function startSession(user){
  currentUser = user;
  document.getElementById("loginScreen").style.display="none";
  document.getElementById("currentUser").textContent = "üë§ " + users[user].name;
  loadChat();
  if(user!=="vadim") document.getElementById("chatInputArea").style.display="none";
}

// –í—ã—Ö–æ–¥
function logout(){
  localStorage.removeItem("session");
  location.reload();
}

// –ú–µ–Ω—é
function toggleMenu(){document.getElementById("sideMenu").classList.toggle("active");}

// –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã
document.querySelectorAll('.calculator').forEach(calc=>{
  const btn = calc.querySelector('.btn-calc');
  btn.addEventListener('click',()=>{
    const sum = parseFloat(calc.querySelector('.sum').value);
    if(isNaN(sum)||sum<0) return;
    const coefs = calc.querySelectorAll('td.coef');
    const results = calc.querySelectorAll('td.result');
    coefs.forEach((c,i)=>{
      results[i].textContent = (sum/parseFloat(c.textContent)).toLocaleString('ru-RU',{minimumFractionDigits:2,maximumFractionDigits:2});
    });
  });
  calc.querySelector('.sum').addEventListener('keydown', e=>{
    if(e.key==='Enter') btn.click();
  });
});

// –ß–∞—Ç
function toggleChat(){
  const w = document.getElementById("chatWindow");
  w.style.display = w.style.display==="flex" ? "none" : "flex";
}
document.getElementById("chatSend").onclick=function(){
  const msg = document.getElementById("chatInput").value.trim();
  if(!msg) return;
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  let data = JSON.parse(localStorage.getItem(chatKey)||"[]");
  data.push({user:currentUser,text:msg});
  localStorage.setItem(chatKey,JSON.stringify(data));
  document.getElementById("chatInput").value="";
  loadChat();
};

function loadChat(){
  const box = document.getElementById("chatMessages");
  box.innerHTML = "";
  const data = JSON.parse(localStorage.getItem(chatKey)||"[]");
  data.forEach(m=>{
    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–æ –∞–¥—Ä–µ—Å–æ–≤–∞–Ω–æ —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    if(m.user === currentUser || currentUser==="vadim"){
      const d=document.createElement("div");
      d.textContent = users[m.user].name+": "+m.text;
      box.appendChild(d);
    }
  });
  box.scrollTop = box.scrollHeight;
}
</script>

</body>
</html>
