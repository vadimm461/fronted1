<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Auto-Style</title>

<style>
body{
font-family:Arial,sans-serif;
margin:0;
padding:20px;
background:#f5f6f8;
overflow-x:hidden;
}

/* ---------- LOGIN ---------- */
.login-screen{
position:fixed;
top:0;
left:0;
width:100%;
height:100vh;
background:linear-gradient(135deg,#1b5e20,#000);
display:flex;
justify-content:center;
align-items:center;
z-index:9999;
}

.login-box{
background:#fff;
padding:30px 25px;
border-radius:14px;
width:100%;
max-width:400px;
text-align:center;
box-shadow:0 20px 50px rgba(0,0,0,.4);
}

.green{color:#2e7d32;}
.black{color:#000;}

select,input[type="password"]{
width:100%;
padding:12px;
font-size:16px;
margin-bottom:15px;
border:1px solid #ccc;
border-radius:6px;
}

.login-btn{
width:100%;
padding:12px;
font-size:16px;
border:none;
border-radius:6px;
cursor:pointer;
color:white;
background:linear-gradient(to right,#43a047,#1b5e20);
}

/* ---------- HEADER ---------- */
.header{
background:white;
padding:15px;
border-radius:6px;
box-shadow:0 2px 6px rgba(0,0,0,.1);
margin-bottom:20px;
text-align:center;
}

.logo{
font-size:28px;
font-weight:bold;
}

/* ---------- MENU ---------- */
.menu-toggle{
position:fixed;
top:20px;
left:20px;
width:50px;
height:50px;
background:linear-gradient(135deg,#2e7d32,#1b5e20);
color:white;
display:flex;
align-items:center;
justify-content:center;
border-radius:15px;
cursor:pointer;
z-index:3000;
}

.side-menu{
position:fixed;
top:0;
left:0;
width:300px;
height:100%;
background:#111;
color:white;
padding:80px 20px 20px 20px;
transform:translateX(-100%);
transition:.4s;
z-index:2500;
}

.side-menu.active{
transform:translateX(0);
}

/* ---------- CALCULATORS ---------- */
.wrapper{
display:flex;
gap:20px;
flex-wrap:wrap;
}

.calculator{
background:#fff;
border-radius:10px;
padding:20px;
box-shadow:0 4px 12px rgba(0,0,0,0.1);
flex:1 1 300px;
}

/* ---------- CHAT BUTTON ---------- */
#chatToggle{
position:fixed;
bottom:20px;
right:20px;
background:linear-gradient(135deg,#2e7d32,#1b5e20);
color:white;
padding:14px 18px;
border-radius:30px;
cursor:pointer;
z-index:4000;
font-weight:bold;
box-shadow:0 6px 20px rgba(0,0,0,.3);
}

.badge{
position:absolute;
top:-6px;
right:-6px;
background:red;
color:white;
border-radius:50%;
font-size:12px;
padding:4px 7px;
}

/* ---------- CHAT WINDOW ---------- */
#chatWindow{
position:fixed;
bottom:90px;
right:20px;
width:340px;
height:460px;
background:#0f0f0f;
border-radius:16px;
display:none;
flex-direction:column;
overflow:hidden;
z-index:4000;
box-shadow:0 10px 40px rgba(0,0,0,.4);
}

#chatHeader{
background:#1b5e20;
color:white;
padding:14px;
font-weight:bold;
text-align:center;
}

#chatMessages{
flex:1;
padding:12px;
overflow-y:auto;
display:flex;
flex-direction:column;
gap:8px;
}

.message{
max-width:75%;
padding:10px 12px;
border-radius:14px;
font-size:14px;
word-wrap:break-word;
}

.my{
align-self:flex-end;
background:#2e7d32;
color:white;
border-bottom-right-radius:4px;
}

.other{
align-self:flex-start;
background:#2a2a2a;
color:white;
border-bottom-left-radius:4px;
}

.sender{
font-size:11px;
opacity:.7;
margin-bottom:3px;
}

#chatInputArea{
display:flex;
padding:10px;
background:#111;
}

#chatInput{
flex:1;
padding:10px;
border:none;
border-radius:20px;
outline:none;
}

#chatSend{
margin-left:8px;
padding:10px 14px;
border:none;
border-radius:20px;
background:#2e7d32;
color:white;
cursor:pointer;
}

/* ---------- MOBILE ---------- */
@media(max-width:768px){

body{
padding:10px;
}

#chatWindow{
right:0;
bottom:0;
width:100%;
height:100%;
border-radius:0;
}

#chatToggle{
bottom:15px;
right:15px;
}

.wrapper{
flex-direction:column;
}

.side-menu{
width:80%;
}

}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginScreen" class="login-screen">
<div class="login-box">
<div class="logo"><span class="green">A</span><span class="black">uto-</span><span class="green">S</span><span class="black">tyle</span></div>
<select id="userSelect">
<option value="cashier">–ö–∞—Å—Å–∏—Ä</option>
<option value="evgeniy">–ï–≤–≥–µ–Ω–∏–π</option>
<option value="vadim">–í–∞–¥–∏–º</option>
</select>
<input type="password" id="passwordInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
<button id="loginBtn" class="login-btn">–í–û–ô–¢–ò</button>
<div id="errorMsg"></div>
</div>
</div>

<div class="menu-toggle" onclick="toggleMenu()">‚ò∞</div>
<div id="sideMenu" class="side-menu">
<div id="currentUser"></div>
<button onclick="logout()">–í–´–ô–¢–ò</button>
</div>

<div class="header">
<div class="logo"><span class="green">A</span><span class="black">uto-</span><span class="green">S</span><span class="black">tyle</span></div>
</div>

<div class="wrapper">
<div class="calculator">–í–∞—à–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π</div>
</div>

<!-- CHAT -->
<div id="chatToggle">–ß–∞—Ç <span id="chatBadge" class="badge">0</span></div>

<div id="chatWindow">
<div id="chatHeader">–û–±—â–∏–π —á–∞—Ç</div>
<div id="chatMessages"></div>
<div id="chatInputArea">
<input type="text" id="chatInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
<button id="chatSend">‚ñ∂</button>
</div>
</div>

<script>
const users={
cashier:{name:"–ö–∞—Å—Å–∏—Ä",pass:"2012"},
evgeniy:{name:"–ï–≤–≥–µ–Ω–∏–π",pass:"0186"},
vadim:{name:"–í–∞–¥–∏–º",pass:"2385"}
};

let currentUser="";
const chatKey="chatHistory";

/* LOGIN */
loginBtn.onclick=function(){
let u=userSelect.value,p=passwordInput.value;
if(p===users[u].pass){
localStorage.setItem("session",u);
startSession(u);
}else errorMsg.textContent="–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å";
};

window.onload=function(){
let s=localStorage.getItem("session");
if(s)startSession(s);
};

function startSession(u){
currentUser=u;
loginScreen.style.display="none";
currentUserDiv=currentUser;
document.getElementById("currentUser").textContent="üë§ "+users[u].name;
loadChat();
}

function logout(){
localStorage.removeItem("session");
location.reload();
}

function toggleMenu(){
sideMenu.classList.toggle("active");
}

/* CHAT */
chatToggle.onclick=()=>chatWindow.style.display=
chatWindow.style.display==="flex"?"none":"flex";

chatSend.onclick=sendMessage;

chatInput.addEventListener("keypress",e=>{
if(e.key==="Enter")sendMessage();
});

function sendMessage(){
let text=chatInput.value.trim();
if(!text)return;

let data=JSON.parse(localStorage.getItem(chatKey)||"[]");
data=data.filter(m=>Date.now()-m.time<86400000);

data.push({from:currentUser,text,time:Date.now()});

localStorage.setItem(chatKey,JSON.stringify(data));
chatInput.value="";
loadChat();
}

function loadChat(){
let data=JSON.parse(localStorage.getItem(chatKey)||"[]");
data=data.filter(m=>Date.now()-m.time<86400000);
localStorage.setItem(chatKey,JSON.stringify(data));

chatMessages.innerHTML="";
let unread=0;

data.forEach(m=>{
let msg=document.createElement("div");
msg.className="message "+(m.from===currentUser?"my":"other");

let sender=document.createElement("div");
sender.className="sender";
sender.textContent=users[m.from].name;

let text=document.createElement("div");
text.textContent=m.text;

msg.appendChild(sender);
msg.appendChild(text);
chatMessages.appendChild(msg);

if(m.from!==currentUser)unread++;
});

chatBadge.textContent=unread;
chatMessages.scrollTop=chatMessages.scrollHeight;
}

window.addEventListener("storage",loadChat);
</script>

</body>
</html>
