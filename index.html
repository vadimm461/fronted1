<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</title>

<style>
*{box-sizing:border-box}
body{font-family:Arial;margin:0;background:#f5f6f8;padding:20px}

/* HEADER */
.header{background:#fff;padding:15px;border-radius:6px;
box-shadow:0 2px 6px rgba(0,0,0,.1);text-align:center;margin-bottom:20px}
.logo{font-size:26px;font-weight:bold}
.green{color:#2e7d32}
.black{color:#000}

/* LOGIN */
.login-screen{
position:fixed;top:0;left:0;width:100%;height:100%;
background:linear-gradient(135deg,#1b5e20,#000);
display:flex;justify-content:center;align-items:center;z-index:9999}
.login-box{
background:#fff;padding:30px;border-radius:12px;
width:100%;max-width:350px;text-align:center}
.login-box input, .login-box select{
width:100%;padding:10px;margin-bottom:10px;
border:1px solid #ccc;border-radius:6px}
.login-btn{
width:100%;padding:10px;border:none;
background:#2e7d32;color:white;border-radius:6px;cursor:pointer}
.error{color:red;font-size:14px}

/* MENU */
.menu-toggle{
position:fixed;top:20px;left:20px;
background:#2e7d32;color:white;
width:45px;height:45px;border-radius:10px;
display:flex;align-items:center;justify-content:center;
cursor:pointer;z-index:2000}
.side-menu{
position:fixed;top:0;left:-280px;width:260px;height:100%;
background:#111;color:white;padding:80px 20px;
transition:.3s}
.side-menu.active{left:0}
.menu-btn{
width:100%;padding:10px;margin-bottom:10px;
border:none;border-radius:6px;background:#333;
color:white;cursor:pointer}
.logout-btn{background:#c62828}

/* CALCULATOR */
.wrapper{display:flex;gap:20px;flex-wrap:wrap}
.calculator{
background:white;padding:20px;border-radius:6px;
box-shadow:0 2px 6px rgba(0,0,0,.1);flex:1}
.input{width:100%;padding:8px;margin-bottom:10px}
.btn{width:100%;padding:10px;background:#1976d2;
color:white;border:none;border-radius:6px;cursor:pointer}

/* CHAT */
#chatToggle{
position:fixed;bottom:20px;right:20px;
background:#2e7d32;color:white;
padding:12px 15px;border-radius:30px;
cursor:pointer;z-index:3000}
#chatWindow{
position:fixed;bottom:80px;right:20px;
width:300px;height:400px;
background:#1c1c1c;border-radius:12px;
display:none;flex-direction:column;
overflow:hidden;z-index:3000}
#chatHeader{
background:#2e7d32;color:white;
padding:10px;font-weight:bold}
#chatMessages{
flex:1;padding:10px;color:white;
overflow-y:auto;font-size:14px}
#chatInputArea{display:flex;padding:10px;background:#111}
#chatInput{
flex:1;padding:8px;border:none;border-radius:6px}
#chatSend{
margin-left:5px;padding:8px 10px;
background:#2e7d32;color:white;border:none;border-radius:6px}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginScreen" class="login-screen">
  <div class="login-box">
    <h2>–í—Ö–æ–¥</h2>
    <select id="userSelect">
      <option value="cashier">–ö–∞—Å—Å–∏—Ä</option>
      <option value="evgeniy">–ï–≤–≥–µ–Ω–∏–π</option>
      <option value="vadim">–í–∞–¥–∏–º</option>
    </select>
    <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å">
    <button class="login-btn" id="loginBtn">–í–û–ô–¢–ò</button>
    <div id="errorMsg" class="error"></div>
  </div>
</div>

<!-- MENU -->
<div class="menu-toggle" onclick="toggleMenu()">‚ò∞</div>
<div id="sideMenu" class="side-menu">
  <div id="currentUser"></div>
  <button class="menu-btn" onclick="logout()">–í—ã–π—Ç–∏</button>
</div>

<!-- HEADER -->
<div class="header">
  <div class="logo"><span class="green">A</span><span class="black">uto-</span><span class="green">S</span><span class="black">tyle</span></div>
</div>

<!-- CALCULATORS -->
<div class="wrapper">
  <div class="calculator">
    <h3>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h3>
    <input type="number" id="sum" class="input" placeholder="–°—É–º–º–∞">
    <input type="number" id="months" class="input" placeholder="–ú–µ—Å—è—Ü—ã">
    <button class="btn" onclick="calc()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
    <div id="result"></div>
  </div>
</div>

<!-- CHAT BUTTON -->
<div id="chatToggle" onclick="toggleChat()">–ß–∞—Ç</div>

<!-- CHAT WINDOW -->
<div id="chatWindow">
  <div id="chatHeader">–ß–∞—Ç</div>
  <div id="chatMessages"></div>
  <div id="chatInputArea">
    <input type="text" id="chatInput">
    <button id="chatSend">OK</button>
  </div>
</div>

<script>
const users={
  cashier:{name:"–ö–∞—Å—Å–∏—Ä",pass:"2012"},
  evgeniy:{name:"–ï–≤–≥–µ–Ω–∏–π",pass:"0186"},
  vadim:{name:"–í–∞–¥–∏–º",pass:"2385"}
};

let currentUser="";
const chatKey="chatHistory";

/* LOGIN */
document.getElementById("loginBtn").onclick=function(){
  const user=document.getElementById("userSelect").value;
  const pass=document.getElementById("passwordInput").value;

  if(pass===users[user].pass){
    localStorage.setItem("session",user);
    startSession(user);
  }else{
    document.getElementById("errorMsg").textContent="–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å";
  }
};

window.onload=function(){
  const saved=localStorage.getItem("session");
  if(saved && users[saved]){
    startSession(saved);
  }
};

function startSession(user){
  currentUser=user;
  document.getElementById("loginScreen").style.display="none";
  document.getElementById("currentUser").textContent="üë§ "+users[user].name;

  if(user!=="vadim"){
    document.getElementById("chatInputArea").style.display="none";
  }

  loadChat();
}

function logout(){
  localStorage.removeItem("session");
  location.reload();
}

/* MENU */
function toggleMenu(){
  document.getElementById("sideMenu").classList.toggle("active");
}

/* CALC */
function calc(){
  const s=+document.getElementById("sum").value;
  const m=+document.getElementById("months").value;
  if(!s||!m)return;
  document.getElementById("result").textContent=
    "–ü–ª–∞—Ç–µ–∂: "+(s/m).toFixed(2);
}

/* CHAT */
function toggleChat(){
  const w=document.getElementById("chatWindow");
  w.style.display = w.style.display==="flex" ? "none" : "flex";
}

document.getElementById("chatSend").onclick=function(){
  const text=document.getElementById("chatInput").value.trim();
  if(!text)return;
  if(currentUser!=="vadim")return;

  const data=JSON.parse(localStorage.getItem(chatKey)||"[]");
  data.push({user:users[currentUser].name,text});
  localStorage.setItem(chatKey,JSON.stringify(data));
  document.getElementById("chatInput").value="";
  loadChat();
};

function loadChat(){
  const box=document.getElementById("chatMessages");
  box.innerHTML="";
  const data=JSON.parse(localStorage.getItem(chatKey)||"[]");
  data.forEach(m=>{
    const d=document.createElement("div");
    d.textContent=m.user+": "+m.text;
    box.appendChild(d);
  });
  box.scrollTop=box.scrollHeight;
}
</script>

</body>
</html>
