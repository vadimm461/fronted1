<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Калькулятор рассрочки</title>

<style>

*{box-sizing:border-box;}

body{
font-family: Arial, sans-serif;
background:#f5f6f8;
margin:0;
padding:20px;
overflow-x:hidden;
}

/* ---------- ШАПКА ---------- */

.header{
background:white;
padding:15px;
border-radius:6px;
box-shadow:0 2px 6px rgba(0,0,0,.1);
margin-bottom:20px;
text-align:center;
}

.logo{
font-size:28px;
font-weight:bold;
letter-spacing:1px;
}

.logo .green{color:#2e7d32;}
.logo .black{color:#000;}

.manager-panel{
margin-top:8px;
font-size:14px;
color:#555;
border-top:1px solid #eee;
padding-top:8px;
}

/* ---------- КАЛЬКУЛЯТОРЫ ---------- */

.wrapper{
display:flex;
gap:20px;
flex-wrap:wrap;
width:100%;
}

.calculator{
background:#fff;
border-radius:6px;
padding:20px;
box-shadow:0 2px 6px rgba(0,0,0,0.1);
flex:1 1 300px;
width:100%;
}

.title{
font-size:20px;
font-weight:bold;
}

.subtitle{
color:#d32f2f;
font-weight:bold;
margin-bottom:15px;
}

.hint{
margin-bottom:10px;
color:#555;
}

.input{
width:100%;
padding:10px;
font-size:16px;
margin-bottom:15px;
border:1px solid #ccc;
border-radius:4px;
}

.btn{
width:100%;
color:white;
padding:12px;
font-size:16px;
border:none;
border-radius:4px;
cursor:pointer;
margin-bottom:20px;
transition:.2s;
}

.btn:hover{opacity:.9;}
.btn:active{transform:scale(.98);}

.btn-calc{
background:linear-gradient(to right,#1976d2,#0d47a1);
}

.btn-non-cash{
background:linear-gradient(to right,#43a047,#2e7d32);
}

.btn-close-shift{
background:linear-gradient(to right,#f57c00,#e65100);
}

.btn-discount{
background:linear-gradient(to right,#8e24aa,#6a1b9a);
}

table{
width:100%;
border-collapse:collapse;
font-size:14px;
}

th{
text-align:left;
padding-bottom:8px;
border-bottom:1px solid #ddd;
}

td{
padding:10px 0;
border-bottom:1px solid #eee;
}

.coef{color:#555;}
.result{font-weight:bold;}

.bottom-buttons{
width:100%;
margin-top:20px;
display:flex;
gap:20px;
flex-wrap:wrap;
}

.bottom-buttons .btn{
flex:1 1 250px;
}

/* ---------- МОБИЛЬНАЯ ФИКСАЦИЯ ---------- */

@media (max-width:768px){

body{padding:10px;}
.wrapper{gap:12px;}
.calculator{width:100%;padding:15px;}
.logo{font-size:24px;}
.title{font-size:18px;}
table{font-size:13px;}
.btn{padding:10px;font-size:15px;}

}

/* ================= ДОБАВЛЕНО ================= */

/* LOGIN */

.login-screen{
position:fixed;
top:0;left:0;
width:100%;height:100vh;
background:linear-gradient(135deg,#1b5e20,#000);
display:flex;
justify-content:center;
align-items:center;
padding:20px;
z-index:9999;
}

.login-box{
background:white;
padding:30px 25px;
border-radius:12px;
width:100%;
max-width:400px;
text-align:center;
box-shadow:0 15px 40px rgba(0,0,0,.35);
}

.login-logo{font-size:30px;font-weight:bold;margin-bottom:10px;}
.login-subtitle{color:#555;margin-bottom:15px;}

select,input[type="password"]{
width:100%;
padding:12px;
font-size:16px;
border:1px solid #ccc;
border-radius:6px;
margin-bottom:15px;
}

.login-btn{
width:100%;
padding:12px;
font-size:16px;
border:none;
border-radius:6px;
cursor:pointer;
color:white;
background:linear-gradient(to right,#43a047,#1b5e20);
}

.error-msg{color:#d32f2f;font-size:14px;margin-top:8px;}

/* SIDE MENU */

.menu-toggle{
position:fixed;
top:15px;left:15px;
width:40px;height:40px;
background:#2e7d32;
color:white;
display:flex;
align-items:center;
justify-content:center;
border-radius:8px;
cursor:pointer;
z-index:2000;
box-shadow:0 4px 10px rgba(0,0,0,.2);
}

.side-menu{
position:fixed;
top:0;left:-260px;
width:260px;height:100%;
background:#111;
color:white;
padding:20px;
transition:.3s;
z-index:1999;
}

.side-menu.active{left:0;}

.session-time{
margin:15px 0;
padding:10px;
background:#222;
border-radius:6px;
font-size:14px;
}

.logout-btn{
width:100%;
padding:10px;
border:none;
border-radius:6px;
cursor:pointer;
background:linear-gradient(to right,#c62828,#8e0000);
color:white;
}

</style>
</head>
<body>

<!-- LOGIN SCREEN -->
<div id="loginScreen" class="login-screen">
  <div class="login-box">
    <div class="login-logo">
      <span class="green">A</span><span class="black">uto-</span>
      <span class="green">S</span><span class="black">tyle</span>
    </div>
    <div class="login-subtitle">Выберите пользователя</div>
    <select id="userSelect">
      <option value="cashier">Кассир</option>
      <option value="evgeniy">Евгений</option>
      <option value="vadim">Вадим</option>
    </select>
    <input type="password" id="passwordInput" placeholder="Введите пароль">
    <button id="loginBtn" class="login-btn">ВОЙТИ</button>
    <div id="errorMsg" class="error-msg"></div>
  </div>
</div>

<div class="menu-toggle" onclick="toggleMenu()">☰</div>

<div id="sideMenu" class="side-menu">
  <h3 id="currentUser"></h3>
  <div class="session-time">
    Сессия истекает через:
    <div id="timeLeft"></div>
  </div>
  <button class="logout-btn" onclick="logout()">Выйти</button>
</div>

<!-- ======= ВАШ САЙТ БЕЗ ИЗМЕНЕНИЙ ======= -->

<!-- ШАПКА -->
<div class="header">
<div class="logo">
<span class="green">A</span><span class="black">uto-</span>
<span class="green">S</span><span class="black">tyle</span>
</div>
<div class="manager-panel">
Панель менеджера
</div>
</div>

<div class="wrapper">

<!-- Калькулятор 1 -->
<div class="calculator">
<div class="title">КАЛЬКУЛЯТОР РАССРОЧКИ</div>
<div class="subtitle">АГРОПРОМБАНК</div>
<div class="hint">Введите общую сумму чека</div>
<input type="number" class="input sum">
<button class="btn btn-calc">РАССЧИТАТЬ</button>
<table>
<tr><th>РАССРОЧКА</th><th>КОЭФФ.</th><th>ИТОГО</th></tr>
<tr><td>АПБ 3</td><td class="coef">0.955</td><td class="result"></td></tr>
<tr><td>АПБ 6</td><td class="coef">0.93</td><td class="result"></td></tr>
<tr><td>АПБ 9</td><td class="coef">0.90</td><td class="result"></td></tr>
<tr><td>АПБ 12</td><td class="coef">0.875</td><td class="result"></td></tr>
</table>
</div>

<!-- Калькулятор 2 -->
<div class="calculator">
<div class="title">КАЛЬКУЛЯТОР РАССРОЧКИ</div>
<div class="subtitle">ЭКСИМБАНК</div>
<input type="number" class="input sum">
<button class="btn btn-calc">РАССЧИТАТЬ</button>
<table>
<tr><th>РАССРОЧКА</th><th>КОЭФФ.</th><th>ИТОГО</th></tr>
<tr><td>3 мес</td><td class="coef">0.955</td><td class="result"></td></tr>
<tr><td>6 мес</td><td class="coef">0.93</td><td class="result"></td></tr>
<tr><td>9 мес</td><td class="coef">0.90</td><td class="result"></td></tr>
<tr><td>12 мес</td><td class="coef">0.886</td><td class="result"></td></tr>
</table>
</div>

<!-- Калькулятор 3 -->
<div class="calculator">
<div class="title">КАЛЬКУЛЯТОР РАССРОЧКИ</div>
<div class="subtitle">СБЕРБАНК</div>
<input type="number" class="input sum">
<button class="btn btn-calc">РАССЧИТАТЬ</button>
<table>
<tr><th>РАССРОЧКА</th><th>КОЭФФ.</th><th>ИТОГО</th></tr>
<tr><td>3 мес</td><td class="coef">0.96</td><td class="result"></td></tr>
<tr><td>6 мес</td><td class="coef">0.93</td><td class="result"></td></tr>
<tr><td>9 мес</td><td class="coef">0.90</td><td class="result"></td></tr>
<tr><td>12 мес</td><td class="coef">0.88</td><td class="result"></td></tr>
</table>
</div>

</div>

<div class="bottom-buttons">
<button id="btnBeznal" class="btn btn-non-cash">ОФОРМИТЬ БЕЗНАЛ</button>
<button id="btnSmena" class="btn btn-close-shift">ЗАКРЫТИЕ СМЕНЫ</button>
<button id="btnDiscount" class="btn btn-discount">РЕГИСТРАЦИЯ СКИДОЧНОЙ КАРТЫ</button>
</div>

<script>

/* ===== ВАШ СТАРЫЙ JS (НЕ ИЗМЕНЁН) ===== */

document.getElementById("btnBeznal").onclick=()=>{location.href="beznal.html";};
document.getElementById("btnSmena").onclick=()=>{location.href="smena.html";};
document.getElementById("btnDiscount").onclick=()=>{location.href="discount.html";};

document.querySelectorAll('.calculator').forEach(calc=>{
const btn = calc.querySelector('.btn-calc');
btn.onclick = ()=>{
const sum=parseFloat(calc.querySelector('.sum').value);
if(!sum) return;
const coefs=calc.querySelectorAll('.coef');
const results=calc.querySelectorAll('.result');
coefs.forEach((c,i)=>{
results[i].textContent=(sum/parseFloat(c.textContent))
.toLocaleString('ru-RU',{minimumFractionDigits:2,maximumFractionDigits:2});
});
};
});

/* ===== ДОБАВЛЕНА АВТОРИЗАЦИЯ ===== */

const users={
cashier:{name:"Кассир",pass:"2012"},
evgeniy:{name:"Евгений",pass:"0186"},
vadim:{name:"Вадим",pass:"2385"}
};

const sessionDuration=24*60*60*1000;
let sessionTimer;

window.addEventListener("load",function(){
const saved=localStorage.getItem("session");
if(saved){
const data=JSON.parse(saved);
if(Date.now()<data.expire){
startSession(data.user,data.expire);
}
}
});

document.getElementById("loginBtn").onclick=function(){
const userKey=document.getElementById("userSelect").value;
const pass=document.getElementById("passwordInput").value;

if(pass===users[userKey].pass){
const expire=Date.now()+sessionDuration;
localStorage.setItem("session",JSON.stringify({user:userKey,expire}));
startSession(userKey,expire);
}else{
document.getElementById("errorMsg").textContent="Неверный пароль";
}
};

function startSession(userKey,expire){
document.getElementById("loginScreen").style.display="none";
document.getElementById("currentUser").textContent=users[userKey].name;
updateTimer(expire);
sessionTimer=setInterval(()=>updateTimer(expire),1000);
}

function updateTimer(expire){
const diff=expire-Date.now();
if(diff<=0){logout();return;}
const h=Math.floor(diff/1000/60/60);
const m=Math.floor((diff/1000/60)%60);
const s=Math.floor((diff/1000)%60);
document.getElementById("timeLeft").textContent=`${h}ч ${m}м ${s}с`;
}

function logout(){
localStorage.removeItem("session");
clearInterval(sessionTimer);
location.reload();
}

function toggleMenu(){
document.getElementById("sideMenu").classList.toggle("active");
}

</script>

</body>
</html>
